import{r as e,j as s,Y as a,a as l}from"./app-BYElD7EB.js";import{H as i}from"./index-CU9DNees.js";import{I as t,a as r}from"./index-bxfBY9vS.js";import{u as o}from"./use-toast-DsNCB_oK.js";import"./iconBase-BvghSGLp.js";const n=({favorites:n=[],products:c=[]})=>{const{toast:d}=o(),m=Array.isArray(c)?c:(null==c?void 0:c.data)||[],[x,h]=e.useState(n),u=e.useMemo(()=>m.filter(e=>null==x?void 0:x.some(s=>s.id===e.id)),[m,x]),j=e.useMemo(()=>{const e={};return u.forEach(s=>{e[s.id]=!0}),e},[u]),[f,g]=e.useState(j);return n.length>0&&u.length>0?s.jsxs("div",{className:"w-10/12 mx-auto min-h-screen",children:[s.jsxs(a,{href:"/",className:"inline-flex items-center hover:opacity-70 mt-24 mb-8",children:[s.jsx(i,{className:"mr-2 text-xl"}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"SEVIMLILAR"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(e=>{var i;const o=f[e.id];return s.jsxs("div",{className:"relative rounded-lg",children:[s.jsx("img",{src:`/storage/${e.photo1}`,loading:"lazy",alt:e.product_name,className:"w-full h-48 object-cover rounded-t-lg"}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{className:"",children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.product_name}),s.jsx("p",{className:"text-black font-bold mt-1",children:(null==(i=e.variants)?void 0:i.length)>0?`${e.variants[0].price.toLocaleString()} so'm`:"Narx mavjud emas"})]}),s.jsx(a,{href:`/detail/${e.id}`,className:"hidden sm:block","aria-label":"View More Button",children:s.jsx("button",{className:"bg-black text-white w-full p-2 rounded-lg hover:bg-gray-800 transition xl:px-8",children:"Ko'proq"})})]}),s.jsx("button",{onClick:()=>(async e=>{try{if(f[e])await l.delete(`/favorites/${e}`),d({title:"Sevimlilardan o'chirildi",description:"✅ Mahsulot o'chirildi"}),h(s=>s.filter(s=>s.id!==e));else{await l.post("/favorites",{product_id:e}),d({title:"Sevimlilarga qo'shildi",description:"✅ Mahsulot qo'shildi"});const s=m.find(s=>s.id===e);h(e=>[...e,s])}g(s=>({...s,[e]:!s[e]}))}catch(s){console.error(s),alert(f[e]?"Sevimlilardan o'chirishda xatolik ❌":"Sevimlilarga qo'shishda xatolik ❌")}})(e.id),className:"absolute top-4 right-4 z-10","aria-label":"Star Button",children:o?s.jsx(t,{className:"text-2xl text-yellow-400"}):s.jsx(r,{className:"text-2xl text-black"})})]},e.id)})})]}):s.jsxs("div",{className:"mt-24 px-5 md:px-10 xl:px-20 min-h-screen",children:[s.jsxs(a,{href:"/",className:"inline-flex items-center mb-2 hover:opacity-70",children:[s.jsx(i,{className:"mr-2 text-xl"}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"SEVIMLILAR"})]}),s.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-screen mb-32 px-4 text-center",children:[s.jsx("div",{className:"w-24 h-24 mb-6",children:s.jsx("img",{src:"/build/assets/favorite-BKwhNz6N.png",loading:"lazy",alt:"Bo'sh sevimlilar ikonkasi",className:"w-full h-full object-contain"})}),s.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-2",children:"SEVIMLI MAHSULOTLARINGIZ HALI YO‘Q."}),s.jsx("p",{className:"max-w-md text-gray-600 mb-6",children:'Yoqtirgan mahsulotlaringizni yo‘qotmaslik uchun ularni sevimlilarga qo‘shing. "Katalog" sahifasida siz ko‘plab qiziqarli mahsulotlarni topishingiz mumkin.'}),s.jsx("button",{className:"bg-black text-white px-6 py-3 rounded hover:bg-gray-800 transition",onClick:()=>window.location.href="/",children:"KATALOGGA O‘TISH"})]})]})};export{n as default};
