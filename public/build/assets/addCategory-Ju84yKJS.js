import{r as e,j as a,a as s}from"./app-BYElD7EB.js";import{u as t}from"./use-toast-DsNCB_oK.js";const l=({categoriesList:l})=>{const{toast:i}=t(),[r,n]=e.useState(""),[c,o]=e.useState(null),[d,u]=e.useState(null),[x,m]=e.useState([]),[p,h]=e.useState(!1);console.log(l);const f=async()=>{try{const e=await s.get("/admin/categories");Array.isArray(e.data)?m(e.data):Array.isArray(e.data.categories)?m(e.data.categories):m([])}catch{m([])}};e.useEffect(()=>{f()},[]);return a.jsx("div",{className:"p-6 min-h-screen xl:w-[1200px] my-10 space-y-10",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Yangi kategoriya qoâ€˜shish"}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{const e=new FormData;e.append("name",r),c&&e.append("image",c),await s.post("/admin/categories",e),i({title:"Muvaffaqiyatli",description:"Kategoriya qoâ€˜shildi"}),n(""),o(null),u(null),f()}catch{i({title:"Xatolik",description:"Kategoriya qoâ€˜shilmadi"})}finally{h(!1)}},className:"space-y-6 max-w-xl",children:[a.jsx("div",{className:"flex justify-start pl-20",children:a.jsxs("div",{className:"relative w-28 h-28",children:[a.jsx("div",{className:"w-full h-full bg-slate-200 rounded-full overflow-hidden flex items-center justify-center",children:d?a.jsx("img",{src:d,className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-5xl",children:"ðŸ“·"})}),a.jsxs("label",{className:"absolute inset-0 cursor-pointer flex items-center justify-center hover:bg-black/30 rounded-full",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(!a)return;o(a);const s=new FileReader;s.onloadend=()=>u(s.result),s.readAsDataURL(a)}}),a.jsx("span",{className:"text-xs text-white bg-black/60 px-2 py-1 rounded-full",children:"Upload"})]})]})}),a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsx("input",{value:r,onChange:e=>n(e.target.value),placeholder:"Kategoriya nomi",className:"border px-4 py-2 rounded w-1/2",required:!0}),a.jsx("button",{disabled:p,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 max-w-[100px]",children:p?"Yuklanmoqda...":"Saqlash"})]})]})]})})};export{l as default};
